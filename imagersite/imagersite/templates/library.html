{% extends "base.html" %}
{% load thumbnail %}
{% load staticfiles %}

{% block title %}
    {{user.username}}'s Library
{% endblock %}

{% block content %}

  <h3>{{user.username}}'s Library</h3>

  <section class="albums">
    <h4>Albums</h4>
    <div class="container">
      <div class="row">
        {% for album in user.albums.all %}
          <div class="col-sm-3">
          <article class="album-info">
            <p class="album-title">{{album.title}}</p>
            <a href="{% url 'album_detail' pk=album.pk %}">
            {% thumbnail album.get_cover "200" as img_file %}
              <img src="{{img_file.url}}">
            {% empty %}
              <img src={% static "default_thumbnail/django-magic-thumb.jpg" %}>
            {% endthumbnail %}
            </a>
            {% if album.owner == user %}
              <p>
                <a href="{% url 'edit_album' pk=album.pk %}">Edit</a>
              </p>
            {% endif %}
          </article>
          </div>
        {% endfor %}
      </div>
    </div>
  </section>
  <section class="photos">
    <h4>Photos</h4>
    <div class="container">
      <div class="row">
        {% for photo in user.photos.all %}
          <div class="col-sm-3">
            <article class="photo-info">
              <p class="photo-title">{{photo.title}}</p>
              {% thumbnail photo.img_file "200" as file %}
                <a href="{% url 'photo_detail' pk=photo.pk %}">
                  <img src="{{file.url}}">
                </a>
                {% empty %}
                  <p>No Photo Found</p>
              {% endthumbnail %}
            {% if photo.owner == user %}
              <p>
                <a href="{% url 'edit_photo' pk=photo.pk %}">Edit</a>
              </p>
            {% endif %}
            </article>
          </div>
        {% endfor %}
      </div>
    </div>
  </section>
{% endblock %}
